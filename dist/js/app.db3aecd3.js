(function(e){function t(t){for(var r,a,i=t[0],u=t[1],l=t[2],d=0,p=[];d<i.length;d++)a=i[d],Object.prototype.hasOwnProperty.call(n,a)&&n[a]&&p.push(n[a][0]),n[a]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);s&&s(t);while(p.length)p.shift()();return c.push.apply(c,l||[]),o()}function o(){for(var e,t=0;t<c.length;t++){for(var o=c[t],r=!0,i=1;i<o.length;i++){var u=o[i];0!==n[u]&&(r=!1)}r&&(c.splice(t--,1),e=a(a.s=o[0]))}return e}var r={},n={app:0},c=[];function a(t){if(r[t])return r[t].exports;var o=r[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,a),o.l=!0,o.exports}a.m=e,a.c=r,a.d=function(e,t,o){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(a.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(o,r,function(t){return e[t]}.bind(null,r));return o},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],u=i.push.bind(i);i.push=t,i=i.slice();for(var l=0;l<i.length;l++)t(i[l]);var s=u;c.push([0,"chunk-vendors"]),o()})({0:function(e,t,o){e.exports=o("56d7")},"056c":function(e,t,o){},"0f90":function(e,t,o){},1120:function(e,t,o){},"1dc1":function(e,t,o){"use strict";o("1120")},"255e":function(e,t,o){},"3be6":function(e,t,o){"use strict";o("0f90")},"50b9":function(e,t,o){},"56d7":function(e,t,o){"use strict";o.r(t);o("e260"),o("e6cf"),o("cca6"),o("a79d");var r=o("7a23"),n={id:"app",class:"app"},c={class:"header"},a={class:"main-component"},i=Object(r["f"])("footer",{class:"footer"},[Object(r["f"])("h2",{onclick:'window.scrollTo({top: 0, behavior: "smooth"});'},"LO COMPRO")],-1);function u(e,t,o,u,l,s){var d=Object(r["v"])("router-view");return Object(r["q"])(),Object(r["e"])("div",n,[Object(r["f"])("div",c,[Object(r["f"])("img",{id:"icon",src:"https://locomproback.onrender.com/product/image/LoComproLogo.png",alt:"Logo",onClick:t[0]||(t[0]=function(){return s.loadProducts&&s.loadProducts.apply(s,arguments)})}),Object(r["f"])("nav",null,[e.is_auth?(Object(r["q"])(),Object(r["e"])("button",{key:0,onClick:t[1]||(t[1]=function(){return s.loadAccount&&s.loadAccount.apply(s,arguments)})}," Carrito ")):Object(r["d"])("",!0),e.is_auth?(Object(r["q"])(),Object(r["e"])("button",{key:1,onClick:t[2]||(t[2]=function(){return s.loadPurchase&&s.loadPurchase.apply(s,arguments)})}," Compras ")):Object(r["d"])("",!0),e.is_auth&&e.admin?(Object(r["q"])(),Object(r["e"])("button",{key:2,onClick:t[3]||(t[3]=function(e){return s.loadFormProducto("crear")})}," Nuevo Producto ")):Object(r["d"])("",!0),e.is_auth?(Object(r["q"])(),Object(r["e"])("button",{key:3,onClick:t[4]||(t[4]=function(){return s.logOut&&s.logOut.apply(s,arguments)})}," Cerrar Sesión ")):Object(r["d"])("",!0),e.is_auth?Object(r["d"])("",!0):(Object(r["q"])(),Object(r["e"])("button",{key:4,onClick:t[5]||(t[5]=function(){return s.loadLogIn&&s.loadLogIn.apply(s,arguments)})}," Iniciar Sesión ")),e.is_auth?Object(r["d"])("",!0):(Object(r["q"])(),Object(r["e"])("button",{key:5,onClick:t[6]||(t[6]=function(){return s.loadSignUp&&s.loadSignUp.apply(s,arguments)})}," Registrarse "))])]),Object(r["f"])("div",a,[Object(r["h"])(d,{onCompletedLogIn:s.completedLogIn,onCompletedSignUp:s.completedSignUp,onLogOut:s.logOut,onProductSelected:s.productSelected,onNeedToLogIn:s.loadLogIn,onLoadForm:s.loadFormProducto,onLoadVerCompra:s.loadVerCompra},null,8,["onCompletedLogIn","onCompletedSignUp","onLogOut","onProductSelected","onNeedToLogIn","onLoadForm","onLoadVerCompra"])]),i])}o("d3b7"),o("25f0");var l=o("1232"),s={name:"App",data:function(){return{is_auth:!1,admin:!1}},components:{},methods:{verifyAuth:function(){this.is_auth=localStorage.getItem("isAuth")||!1;try{var e=localStorage.getItem("accessToken"),t=Object(l["a"])(e).idUser.toString();1==t&&(this.admin=!0)}catch(o){this.admin=!1}this.$router.push({name:"root"})},loadLogIn:function(){this.$router.push({name:"logIn"})},loadSignUp:function(){this.$router.push({name:"signUp"})},completedLogIn:function(e){localStorage.setItem("isAuth",!0),localStorage.setItem("email",e.email),localStorage.setItem("accessToken",e.accessToken),localStorage.setItem("refreshToken",e.refreshToken),this.verifyAuth()},completedSignUp:function(e){alert("Registro Exitoso"),this.completedLogIn(e)},productSelected:function(e){console.log("Mandar a info del producto",e),this.$router.push({name:"producto",params:{producto:e}})},loadHome:function(){this.$router.push({name:"home"})},loadAccount:function(){this.$router.push({name:"carrito"})},loadProducts:function(){this.$router.push({name:"root"})},loadFormProducto:function(e,t){this.$router.push({name:"formProducto",params:{action:e,producto:t}})},loadPurchase:function(){this.$router.push({name:"purchases"})},loadVerCompra:function(e){this.$router.push({name:"factura",params:{idCarrito:e}})},logOut:function(){localStorage.clear(),alert("Sesión Cerrada"),this.verifyAuth(),window.location.href=window.location.href}},created:function(){this.verifyAuth()}},d=(o("7ca7"),o("d959")),p=o.n(d);const f=p()(s,[["render",u]]);var m=f,h=o("6c02"),b={class:"logIn_user"},g={class:"container_logIn_user"},O=Object(r["f"])("h2",null,"Iniciar sesión",-1),j=Object(r["f"])("br",null,null,-1),v=Object(r["f"])("br",null,null,-1),k=Object(r["f"])("button",{type:"submit"},"Iniciar Sesion",-1);function C(e,t,o,n,c,a){return Object(r["q"])(),Object(r["e"])("div",b,[Object(r["f"])("div",g,[O,Object(r["f"])("form",{onSubmit:t[2]||(t[2]=Object(r["D"])((function(){return a.processLogInUser&&a.processLogInUser.apply(a,arguments)}),["prevent"]))},[Object(r["C"])(Object(r["f"])("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=function(t){return e.user.email=t}),placeholder:"Email"},null,512),[[r["A"],e.user.email]]),j,Object(r["C"])(Object(r["f"])("input",{type:"password","onUpdate:modelValue":t[1]||(t[1]=function(t){return e.user.password=t}),placeholder:"Password"},null,512),[[r["A"],e.user.password]]),v,k],32)])])}var y=o("bc3a"),w=o.n(y),I={name:"LogIn",data:function(){return{user:{email:"",password:""}}},methods:{processLogInUser:function(){var e=this;w.a.post("https://locomproback.onrender.com/user/login/",this.user,{headers:{}}).then((function(t){var o={email:e.user.email,accessToken:t.data.accessToken,refreshToken:t.data.refreshToken};e.$emit("completedLogIn",o)})).catch((function(e){console.log(e),e.response.status>300&&alert("Credenciales Incorrectas."),document.getElementsByTagName("input")[0].value="",document.getElementsByTagName("input")[1].value=""}))}}};o("9d34");const S=p()(I,[["render",C]]);var P=S,T={class:"signUp_user"},x={class:"container_signUp_user"},q=Object(r["f"])("h2",null,"Registrarse",-1),A=Object(r["f"])("br",null,null,-1),U=Object(r["f"])("br",null,null,-1),R=Object(r["f"])("br",null,null,-1),$=Object(r["f"])("br",null,null,-1),L=Object(r["f"])("br",null,null,-1),E=Object(r["f"])("br",null,null,-1),V=Object(r["f"])("br",null,null,-1),_=Object(r["f"])("p",null,"Genero",-1),F=Object(r["f"])("br",null,null,-1),B=Object(r["g"])("Masculino "),D=Object(r["f"])("br",null,null,-1),z=Object(r["g"])("Femenino "),M=Object(r["f"])("button",{type:"submit"},"Registrarse",-1);function N(e,t,o,n,c,a){return Object(r["q"])(),Object(r["e"])("div",T,[Object(r["f"])("div",x,[q,Object(r["f"])("form",{onSubmit:t[9]||(t[9]=Object(r["D"])((function(){return a.processSignUp&&a.processSignUp.apply(a,arguments)}),["prevent"]))},[Object(r["C"])(Object(r["f"])("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=function(t){return e.user.nombres=t}),placeholder:"Nombres",required:""},null,512),[[r["A"],e.user.nombres]]),A,Object(r["C"])(Object(r["f"])("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=function(t){return e.user.apellidos=t}),placeholder:"Apellidos",required:""},null,512),[[r["A"],e.user.apellidos]]),U,Object(r["C"])(Object(r["f"])("input",{type:"number","onUpdate:modelValue":t[2]||(t[2]=function(t){return e.user.cedula=t}),placeholder:"Cédula",required:""},null,512),[[r["A"],e.user.cedula]]),R,Object(r["C"])(Object(r["f"])("input",{type:"email","onUpdate:modelValue":t[3]||(t[3]=function(t){return e.user.email=t}),placeholder:"Email",required:""},null,512),[[r["A"],e.user.email]]),$,Object(r["C"])(Object(r["f"])("input",{type:"password","onUpdate:modelValue":t[4]||(t[4]=function(t){return e.user.password=t}),placeholder:"Password",required:""},null,512),[[r["A"],e.user.password]]),L,Object(r["C"])(Object(r["f"])("input",{type:"text","onUpdate:modelValue":t[5]||(t[5]=function(t){return e.user.direccion=t}),placeholder:"Dirección",required:""},null,512),[[r["A"],e.user.direccion]]),E,Object(r["C"])(Object(r["f"])("input",{type:"number","onUpdate:modelValue":t[6]||(t[6]=function(t){return e.user.edad=t}),placeholder:"Edad",min:"16",max:"105",required:""},null,512),[[r["A"],e.user.edad]]),V,_,F,Object(r["f"])("label",null,[Object(r["C"])(Object(r["f"])("input",{type:"radio",name:"genero",value:"M","onUpdate:modelValue":t[7]||(t[7]=function(t){return e.user.genero=t})},null,512),[[r["z"],e.user.genero]]),B]),D,Object(r["f"])("label",null,[Object(r["C"])(Object(r["f"])("input",{type:"radio",name:"genero",value:"F","onUpdate:modelValue":t[8]||(t[8]=function(t){return e.user.genero=t})},null,512),[[r["z"],e.user.genero]]),z]),M],32)])])}var H={name:"SignUp",data:function(){return{user:{nombres:"",apellidos:"",cedula:"",password:"",email:"",direccion:"",edad:"",genero:""}}},methods:{processSignUp:function(){var e=this;w.a.post("https://locomproback.onrender.com/user/signup/",this.user,{headers:{}}).then((function(t){var o={email:e.user.email,accessToken:t.data.accessToken,refreshToken:t.data.refreshToken};e.$emit("completedSignUp",o)})).catch((function(e){console.log(e),alert("ERROR: Fallo en el registro.")}))}}};o("5e36");const J=p()(H,[["render",N]]);var G=J,K={class:"greetings"},Q=Object(r["g"])("¡Bienvenido "),W=Object(r["g"])("!");function X(e,t,o,n,c,a){return Object(r["q"])(),Object(r["e"])("div",K,[Object(r["f"])("h1",null,[Q,Object(r["f"])("span",null,Object(r["x"])(e.username),1),W])])}var Y={name:"Home",data:function(){return{username:localStorage.getItem("username")||"none"}}};o("df7cb");const Z=p()(Y,[["render",X]]);var ee=Z,te={key:0,class:"information"},oe=Object(r["f"])("h1",null,"Carrito de compras",-1),re={id:"v-for-object",class:"listaCarrito"},ne={class:"productoCarrito"},ce=["onClick"],ae={class:"imageCarrito"},ie=["src"],ue={class:"controls"},le={class:"cantidad"},se=Object(r["g"])(" Cantidad "),de=["max","onUpdate:modelValue"],pe=["onClick"];function fe(e,t,o,n,c,a){return e.loaded?(Object(r["q"])(),Object(r["e"])("div",te,[oe,Object(r["f"])("h2",null,"Total: "+Object(r["x"])(e.total),1),Object(r["f"])("ul",re,[(Object(r["q"])(!0),Object(r["e"])(r["a"],null,Object(r["u"])(e.carrito,(function(e){return Object(r["q"])(),Object(r["e"])("li",ne,[Object(r["f"])("a",null,[Object(r["f"])("h2",{onClick:function(t){return a.goToProduct(e.idProducto)}},Object(r["x"])(e.nombre),9,ce),Object(r["f"])("h3",null,"$"+Object(r["x"])(e.precio),1),Object(r["f"])("div",ae,[Object(r["f"])("img",{src:"https://locomproback.onrender.com/product/image/"+e.productImage},null,8,ie)]),Object(r["f"])("div",ue,[Object(r["f"])("div",le,[se,Object(r["C"])(Object(r["f"])("input",{type:"number",min:"1",max:e.stock,"onUpdate:modelValue":function(t){return e.cantidad=t},onChange:t[0]||(t[0]=function(e){return a.changeTotal()})},null,40,de),[[r["A"],e.cantidad]])]),Object(r["f"])("img",{id:"deleteProduct",alt:"Delete",src:"https://cdn-icons-png.flaticon.com/512/75/75519.png",onClick:function(t){return a.deleteProducto(e.idProducto,e.nombre)}},null,8,pe)])])])})),256))]),Object(r["f"])("button",{onClick:t[1]||(t[1]=function(e){return a.buyCart()})},"Comprar")])):Object(r["d"])("",!0)}var me=o("1da1"),he=(o("96cf"),o("99af"),o("ac1f"),o("1276"),{name:"Carrito",data:function(){return{carrito:null,loaded:!1,total:null}},methods:{buyCart:function(){var e=Object(me["a"])(regeneratorRuntime.mark((function e(){var t,o,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(console.log("Comprando cosas"),t=confirm("¿Continuar con la compra de los productos de este carrito?"),t){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,this.verifyToken();case 6:o=localStorage.getItem("accessToken"),console.log("token"),console.log(o),r=Object(l["a"])(o).idUser.toString(),w.a.post("https://locomproback.onrender.com/user/checkout/".concat(r,"/").concat(this.total),{},{headers:{Authorization:"Bearer ".concat(o)}}).then((function(e){alert("Muchas gracias por su compra. Vuelva pronto!"),window.location.href=window.location.href})).catch((function(e){console.log("Error",e.response)}));case 11:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),changeTotal:function(){for(var e in this.total=0,this.carrito)this.carrito[e].cantidad>this.carrito[e].stock&&(this.carrito[e].cantidad=this.carrito[e].stock),this.total+=this.carrito[e].precio*this.carrito[e].cantidad},getData:function(){var e=Object(me["a"])(regeneratorRuntime.mark((function e(){var t,o,r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(null!==localStorage.getItem("accessToken")&&null!==localStorage.getItem("refreshToken")){e.next=5;break}return alert("Ocurrio un error"),console.log("Acas"),this.$emit("logOut"),e.abrupt("return");case 5:return e.next=7,this.verifyToken();case 7:t=localStorage.getItem("accessToken"),o=Object(l["a"])(t).idUser.toString(),w.a.get("https://locomproback.onrender.com/user/cart/".concat(o,"/"),{headers:{Authorization:"Bearer ".concat(t)}}).then((function(e){console.log("Info",e),r.carrito=e.data.productos,r.changeTotal(),r.loaded=!0})).catch((function(e){"No Productos"==e.response.data.info.split(". ")[2]?(alert("No hay productos en tu carrito. Por favor añade los que quieras"),window.location.href=window.location.href):(alert("Ocurrio un error"),console.log(e.response),console.log("Aca"),r.$emit("logOut"))}));case 10:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),verifyToken:function(){var e=this,t=localStorage.getItem("refreshToken");return w.a.post("https://locomproback.onrender.com/user/refresh/",{},{headers:{Authorization:"Bearer ".concat(t)}}).then((function(e){localStorage.setItem("accessToken",e.data.accessToken)})).catch((function(t){alert("Ocurrio un error"),console.log(t),console.log("Alla"),e.$emit("logOut")}))},deleteProducto:function(){var e=Object(me["a"])(regeneratorRuntime.mark((function e(t,o){var r,n,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(console.log("Borrando del carrito"),r=confirm('¿Está seguro que desea eliminar el producto "'.concat(o,'" de su carrito?')),r){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,this.verifyToken();case 6:n=localStorage.getItem("accessToken"),c=Object(l["a"])(n).idUser.toString(),w.a.delete("https://locomproback.onrender.com/user/cart/".concat(c),{headers:{Authorization:"Bearer ".concat(n)},data:{producto:t}}).then((function(e){alert("Producto eliminado satisfactoriamente")})).catch((function(e){console.log("Error",e),console.log(e.response)})),this.getData();case 10:case"end":return e.stop()}}),e,this)})));function t(t,o){return e.apply(this,arguments)}return t}(),goToProduct:function(e){console.log("Pulsando nombre "+e),this.$emit("productSelected",e)}},created:function(){var e=Object(me["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.getData();case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()});o("e643");const be=p()(he,[["render",fe]]);var ge=be,Oe={class:"greetings"},je=Object(r["g"])("Productos disponibles "),ve={key:0},ke={id:"v-for-object",class:"listadoProductos"},Ce={class:"producto"},ye=["onClick"],we={class:"imageList"},Ie=["src"];function Se(e,t,o,n,c,a){return Object(r["q"])(),Object(r["e"])(r["a"],null,[Object(r["f"])("div",Oe,[Object(r["f"])("h1",null,[je,e.is_auth?(Object(r["q"])(),Object(r["e"])("span",ve," para ti, "+Object(r["x"])(e.email.split("@")[0]),1)):Object(r["d"])("",!0)])]),Object(r["f"])("ul",ke,[(Object(r["q"])(!0),Object(r["e"])(r["a"],null,Object(r["u"])(e.lista,(function(e){return Object(r["q"])(),Object(r["e"])("li",Ce,[Object(r["f"])("div",{class:"info",onClick:function(t){return a.loadProduct(e.idProducto)}},[Object(r["f"])("h2",null,Object(r["x"])(e.nombre),1),Object(r["f"])("div",we,[Object(r["f"])("img",{src:"https://locomproback.onrender.com/product/image/"+e.productImage},null,8,Ie)]),Object(r["f"])("h3",null,"$"+Object(r["x"])(e.precio),1)],8,ye)])})),256))])],64)}var Pe={name:"Products",data:function(){return this.listing(),{cargado:!1,lista:null,is_auth:localStorage.getItem("isAuth")||!1,email:localStorage.getItem("email")||""}},methods:{inicio:function(){this.cargado=!1,this.lista=null},listing:function(){var e=this;w.a.get("https://locomproback.onrender.com").then((function(t){e.cargado=!0,e.lista=t.data.data})).catch((function(e){console.log("Error",e)}))},getImageUrl:function(e){return console.log("Buscando imagen"),"https://locomproback.onrender.com/product/image/"+e},loadProduct:function(e){console.log("Ir a producto",e),this.$emit("productSelected",e)}},created:function(){this.inicio()}};o("7dc0");const Te=p()(Pe,[["render",Se]]);var xe=Te,qe={key:0,class:"container"},Ae={class:"image"},Ue=["src"],Re={class:"data"},$e=Object(r["f"])("strong",null,"Precio: ",-1),Le=Object(r["f"])("strong",null,"Marca: ",-1),Ee=Object(r["f"])("strong",null,"Stock: ",-1),Ve=Object(r["f"])("br",null,null,-1),_e={class:"buttons"};function Fe(e,t,o,n,c,a){return e.producto?(Object(r["q"])(),Object(r["e"])("div",qe,[Object(r["f"])("h1",null,Object(r["x"])(e.producto.nombre),1),Object(r["f"])("div",Ae,[Object(r["f"])("img",{src:"https://locomproback.onrender.com/product/image/"+e.producto.productImage,alt:"Imagen Producto",title:"Product Image"},null,8,Ue)]),Object(r["f"])("div",Re,[Object(r["f"])("h2",null,[$e,Object(r["g"])("$"+Object(r["x"])(e.producto.precio),1)]),Object(r["f"])("h3",null,[Le,Object(r["g"])(Object(r["x"])(e.producto.marca.nombre),1)]),Object(r["f"])("h3",null,[Ee,Object(r["g"])(Object(r["x"])(e.producto.stock),1)]),Ve,Object(r["f"])("p",null,Object(r["x"])(e.producto.descripcion),1)]),Object(r["f"])("p",_e,[Object(r["f"])("a",{class:"button-add",onClick:t[0]||(t[0]=function(e){return a.addToCart()})},"Agregar al Carrito"),e.admin&&e.email?(Object(r["q"])(),Object(r["e"])("a",{key:0,class:"button-edit",onClick:t[1]||(t[1]=function(e){return a.editProduct()})},"Editar Producto")):Object(r["d"])("",!0),e.admin&&e.email?(Object(r["q"])(),Object(r["e"])("a",{key:1,class:"button-delete",onClick:t[2]||(t[2]=function(e){return a.deleteProduct()})},"Eliminar Producto")):Object(r["d"])("",!0)])])):Object(r["d"])("",!0)}var Be={name:"Home",data:function(){return this.getInfo(),{id:null,email:localStorage.getItem("email")||"",producto:null,admin:!1}},methods:{init:function(){this.id=window.location.href.split("/product/")[1];try{var e=localStorage.getItem("accessToken"),t=Object(l["a"])(e).idUser.toString();1==t&&(this.admin=!0)}catch(o){this.admin=!1}this.producto=null},getInfo:function(){var e=this;this.id=window.location.href.split("/product/")[1],w.a.get("https://locomproback.onrender.com/product/".concat(this.id)).then((function(t){console.log(t.data.data),e.cargado=!0,e.producto=t.data.data})).catch((function(e){console.log("Error",e)}))},addToCart:function(){var e=Object(me["a"])(regeneratorRuntime.mark((function e(){var t,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.email){e.next=2;break}return e.abrupt("return",this.$emit("needToLogIn"));case 2:return console.log("Añadiendo"),e.next=5,this.verifyToken();case 5:t=localStorage.getItem("accessToken"),o=Object(l["a"])(t).idUser.toString(),w.a.post("https://locomproback.onrender.com/user/cart/".concat(o),{producto:this.id,cantidad:1},{headers:{Authorization:"Bearer ".concat(t)}}).then((function(e){alert("Producto agregado al carrito")})).catch((function(e){console.log("Error",e)}));case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),deleteProduct:function(){console.log("Borrando");var e=confirm('¿Está seguro que desea eliminar el producto "'.concat(this.producto.nombre,'" del inventario?'));e&&(w.a.delete("https://locomproback.onrender.com/product/".concat(this.id)).then((function(e){alert("Producto eliminado satisfactoriamente")})).catch((function(e){console.log("Error",e)})),window.location.href=window.location.href)},editProduct:function(){console.log("Editando");var e=confirm('¿Está seguro que desea editar el producto "'.concat(this.producto.nombre,'"?\nTendrá que agregar la imágen de nuevo.'));e&&this.$emit("loadForm","editar",this.id)},verifyToken:function(){var e=this,t=localStorage.getItem("refreshToken");return w.a.post("https://locomproback.onrender.com/user/refresh/",{},{headers:{Authorization:"Bearer ".concat(t)}}).then((function(e){console.log("Refrescado",e),localStorage.setItem("accessToken",e.data.accessToken)})).catch((function(t){alert("Ocurrio un error"),console.log(t),console.log("Por aca"),e.$emit("logOut")}))}},created:function(){this.init()}};o("1dc1");const De=p()(Be,[["render",Fe]]);var ze=De,Me={class:"formProduct"},Ne={class:"container_formProduct"},He={key:0},Je=Object(r["f"])("br",null,null,-1),Ge=Object(r["f"])("br",null,null,-1),Ke=Object(r["f"])("br",null,null,-1),Qe=Object(r["f"])("br",null,null,-1),We=Object(r["f"])("option",{value:"-1",disabled:"",hidden:"",selected:""},"Marca",-1),Xe=["value"],Ye=Object(r["f"])("br",null,null,-1),Ze={type:"submit"};function et(e,t,o,n,c,a){return Object(r["q"])(),Object(r["e"])("div",Me,[Object(r["f"])("div",Ne,[Object(r["f"])("h2",null,Object(r["x"])(e.accion)+" Producto",1),"Editar"==e.accion?(Object(r["q"])(),Object(r["e"])("span",He,"Si no selecciona un archivo, se establecerá la imagen por defecto")):Object(r["d"])("",!0),Object(r["f"])("form",{onSubmit:t[6]||(t[6]=Object(r["D"])((function(){return a.processAction&&a.processAction.apply(a,arguments)}),["prevent"]))},[Object(r["C"])(Object(r["f"])("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=function(t){return e.product.nombre=t}),placeholder:"Nombre",required:""},null,512),[[r["A"],e.product.nombre]]),Je,Object(r["C"])(Object(r["f"])("textarea",{name:"descripcion",id:"",rows:"4","onUpdate:modelValue":t[1]||(t[1]=function(t){return e.product.descripcion=t}),placeholder:"Descripción"},null,512),[[r["A"],e.product.descripcion]]),Ge,Object(r["C"])(Object(r["f"])("input",{type:"number","onUpdate:modelValue":t[2]||(t[2]=function(t){return e.product.precio=t}),min:"50",placeholder:"Precio",required:""},null,512),[[r["A"],e.product.precio]]),Ke,Object(r["C"])(Object(r["f"])("input",{type:"number","onUpdate:modelValue":t[3]||(t[3]=function(t){return e.product.stock=t}),min:"0",placeholder:"Stock",required:""},null,512),[[r["A"],e.product.stock]]),Qe,Object(r["f"])("select",{id:"marcaSelect",onChange:t[4]||(t[4]=function(e){return a.cambiarMarca(e)}),required:""},[We,(Object(r["q"])(!0),Object(r["e"])(r["a"],null,Object(r["u"])(e.marcas,(function(e){return Object(r["q"])(),Object(r["e"])("option",{value:e.idMarca},Object(r["x"])(e.nombre),9,Xe)})),256))],32),Object(r["f"])("input",{id:"archivo",type:"file",onChange:t[5]||(t[5]=function(){return a.fileChange&&a.fileChange.apply(a,arguments)})},null,32),Ye,Object(r["f"])("button",Ze,Object(r["x"])(e.accion),1)],32)])])}o("fb6a");var tt={name:"FormProducto",data:function(){var e=window.location.href.split("product/")[1];return e.length>5&&(e=e.split("/")[0]),{product:{nombre:"",precio:"",descripcion:"",stock:"",marcaId:"",productImage:""},accion:e[0].toUpperCase()+e.slice(1).toLowerCase(),image:null,marcas:null}},methods:{cargarInfo:function(e){var t=this;console.log("Cargando los datos del producto",e),w.a.get("https://locomproback.onrender.com/product/".concat(e)).then((function(e){var o=e.data.data;t.product={nombre:o.nombre,precio:o.precio,descripcion:o.descripcion,stock:o.stock,marcaId:o.marca.idMarca,productImage:o.productImage},console.log(t.product),document.getElementById("marcaSelect").value=t.product.marcaId})).catch((function(e){console.log("Error",e)}))},processAction:function(){console.log("A procesar"),console.log(this.product.marcaId),-1!=this.product.marcaId&&""!=this.product.marcaId?"Crear"==this.accion?this.createProduct():this.updateProduct():alert("Por favor seleccione una marca")},createProduct:function(){var e=this,t=this.createFormData();w.a.post("https://locomproback.onrender.com/product",t,{headers:{"Content-Type":"multipart/form-data"}}).then((function(t){alert("Producto creado"),e.$emit("productSelected",t.data.producto.idProducto)})).catch((function(e){console.log(e),alert("ERROR: Fallo en el registro.")}))},updateProduct:function(){var e=this,t=this.createFormData();console.log(t),w.a.put("https://locomproback.onrender.com/product/".concat(this.id),t,{headers:{"Content-Type":"multipart/form-data"}}).then((function(t){alert("Producto actualizado"),e.$emit("productSelected",e.id)})).catch((function(e){console.log(e),alert("ERROR: Fallo en el registro.")}))},createFormData:function(){var e=new FormData;return e.append("nombre",this.product.nombre),e.append("precio",this.product.precio),e.append("descripcion",this.product.descripcion),e.append("stock",this.product.stock),e.append("marcaId",this.product.marcaId),console.log("Formulario",this.product),e.append("productImage",this.image),e},fileChange:function(e){this.fileChanged=!0,this.image=e.target.files[0]},cambiarMarca:function(e){this.product.marcaId=e.target.value}},created:function(){var e=this;this.url=window.location.href.split("product/")[1],this.url.length>5&&(this.url=this.url.split("/"),this.id=this.url[1],this.cargarInfo(this.id),this.url=this.url[0]),w.a.get("https://locomproback.onrender.com/marcas").then((function(t){t.data.data;e.marcas=t.data.data})).catch((function(e){console.log("Error",e)}))}};o("88f9");const ot=p()(tt,[["render",et]]);var rt=ot,nt={key:0,class:"information"},ct=Object(r["f"])("h1",null,"Compras Realizadas",-1),at={id:"v-for-object",class:"listaCompras"},it=["onClick"],ut={id:"costoCarrito"},lt={id:"fechaCarrito"};function st(e,t,o,n,c,a){return e.loaded?(Object(r["q"])(),Object(r["e"])("div",nt,[ct,Object(r["f"])("ul",at,[(Object(r["q"])(!0),Object(r["e"])(r["a"],null,Object(r["u"])(e.compras,(function(e){return Object(r["q"])(),Object(r["e"])("li",{class:"carritos",onClick:function(t){return a.describeCart(e.idCarrito)}},[Object(r["f"])("a",null,[Object(r["f"])("h2",ut,"Costo total: "+Object(r["x"])(e.facturas[0].precioTotal),1),Object(r["f"])("h3",lt,"Fecha: "+Object(r["x"])(e.facturas[0].fecha),1)])],8,it)})),256))])])):Object(r["d"])("",!0)}var dt={name:"Carrito",data:function(){return{compras:null,loaded:!1}},methods:{getData:function(){var e=Object(me["a"])(regeneratorRuntime.mark((function e(){var t,o,r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(null!==localStorage.getItem("accessToken")&&null!==localStorage.getItem("refreshToken")){e.next=5;break}return alert("Ocurrio un error"),console.log("Acas"),this.$emit("logOut"),e.abrupt("return");case 5:return e.next=7,this.verifyToken();case 7:t=localStorage.getItem("accessToken"),o=Object(l["a"])(t).idUser.toString(),w.a.get("https://locomproback.onrender.com/user/purchases/".concat(o,"/"),{headers:{Authorization:"Bearer ".concat(t)}}).then((function(e){0==e.data.data.length?(alert("No haz realizado compras en nuestra tienda. Te invitamos a que agregues algunos productos a tu carrito y realices tu primera adquisición"),window.location.href=window.location.href):(r.compras=e.data.data,console.log(e.data.data),r.loaded=!0)})).catch((function(e){"No Productos"==e.response.data.info.split(". ")[2]?(alert("No hay productos en tu carrito. Por favor añade los que quieras"),window.location.href=window.location.href):(alert("Ocurrio un error"),console.log(e.response),console.log("Aca"),r.$emit("logOut"))}));case 10:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),verifyToken:function(){var e=this,t=localStorage.getItem("refreshToken");return w.a.post("https://locomproback.onrender.com/user/refresh/",{},{headers:{Authorization:"Bearer ".concat(t)}}).then((function(e){localStorage.setItem("accessToken",e.data.accessToken)})).catch((function(t){alert("Ocurrio un error"),console.log(t),console.log("Alla"),e.$emit("logOut")}))},describeCart:function(e){console.log("Vamos a listar los productos del carrito "+e),this.$emit("loadVerCompra",e)}},created:function(){var e=Object(me["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.getData();case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()};o("76f0");const pt=p()(dt,[["render",st]]);var ft=pt,mt={key:0,class:"information"},ht=Object(r["f"])("h1",null,"Carrito de compras",-1),bt={id:"v-for-object",class:"listaCarritoComprado"},gt=["onClick"],Ot={class:"imageCarritoComprado"},jt=["src"];function vt(e,t,o,n,c,a){return e.loaded?(Object(r["q"])(),Object(r["e"])("div",mt,[ht,Object(r["f"])("h2",null,"Total: "+Object(r["x"])(e.total),1),Object(r["f"])("ul",bt,[(Object(r["q"])(!0),Object(r["e"])(r["a"],null,Object(r["u"])(e.carrito,(function(e){return Object(r["q"])(),Object(r["e"])("li",{class:"productoCarritoComprado",onClick:function(t){return a.goToProduct(e.idProducto)}},[Object(r["f"])("a",null,[Object(r["f"])("h2",null,Object(r["x"])(e.nombre),1),Object(r["f"])("h3",null,"$"+Object(r["x"])(e.precio),1),Object(r["f"])("div",Ot,[Object(r["f"])("img",{src:"https://locomproback.onrender.com/product/image/"+e.productImage},null,8,jt)])])],8,gt)})),256))])])):Object(r["d"])("",!0)}var kt={name:"Carrito",data:function(){return{carrito:null,loaded:!1,total:null}},methods:{changeTotal:function(){for(var e in this.total=0,this.carrito)this.carrito[e].cantidad>this.carrito[e].stock&&(this.carrito[e].cantidad=this.carrito[e].stock),this.total+=this.carrito[e].precio*this.carrito[e].cantidad},getData:function(){var e=Object(me["a"])(regeneratorRuntime.mark((function e(){var t,o,r,n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(null!==localStorage.getItem("accessToken")&&null!==localStorage.getItem("refreshToken")){e.next=5;break}return alert("Ocurrio un error"),console.log("Acas"),this.$emit("logOut"),e.abrupt("return");case 5:return e.next=7,this.verifyToken();case 7:t=localStorage.getItem("accessToken"),console.log("token"),console.log(t),o=Object(l["a"])(t).idUser.toString(),r=window.location.href.split("/factura/")[1],w.a.get("https://locomproback.onrender.com/user/purchase/".concat(o,"/").concat(r,"/"),{headers:{Authorization:"Bearer ".concat(t)}}).then((function(e){console.log("Info",e),n.carrito=e.data.productos,n.changeTotal(),n.loaded=!0})).catch((function(e){"No Productos"==e.response.data.info.split(". ")[2]?(alert("No hay productos en tu carrito. Por favor añade los que quieras"),window.location.href=window.location.href):(alert("Ocurrio un error"),console.log(e.response),console.log("Aca"),n.$emit("logOut"))}));case 13:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),verifyToken:function(){var e=this,t=localStorage.getItem("refreshToken");return w.a.post("https://locomproback.onrender.com/user/refresh/",{},{headers:{Authorization:"Bearer ".concat(t)}}).then((function(e){console.log("Refrescado",e),localStorage.setItem("accessToken",e.data.accessToken)})).catch((function(t){alert("Ocurrio un error"),console.log(t),console.log("Alla"),e.$emit("logOut")}))},goToProduct:function(e){console.log("Pulsando nombre "+e),this.$emit("productSelected",e)}},created:function(){var e=Object(me["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.getData();case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()};o("3be6");const Ct=p()(kt,[["render",vt]]);var yt=Ct,wt=[{path:"/",name:"root",component:xe},{path:"/user/logIn",name:"logIn",component:P},{path:"/user/signUp",name:"signUp",component:G},{path:"/user/home",name:"home",component:ee},{path:"/user/cart",name:"carrito",component:ge},{path:"/user/products",name:"products",component:xe},{path:"/product/:producto",name:"producto",component:ze},{path:"/manage-product/:action/:producto?",name:"formProducto",component:rt},{path:"/user/purchases",name:"purchases",component:ft},{path:"/user/factura/:idCarrito",name:"factura",component:yt}],It=Object(h["a"])({history:Object(h["b"])(),routes:wt}),St=It;Object(r["c"])(m).use(St).mount("#app")},"5e36":function(e,t,o){"use strict";o("50b9")},7652:function(e,t,o){},"76f0":function(e,t,o){"use strict";o("cf78")},"7ca7":function(e,t,o){"use strict";o("7652")},"7dc0":function(e,t,o){"use strict";o("056c")},"829c":function(e,t,o){},"849a":function(e,t,o){},"88f9":function(e,t,o){"use strict";o("849a")},9032:function(e,t,o){},"9d34":function(e,t,o){"use strict";o("829c")},cf78:function(e,t,o){},df7cb:function(e,t,o){"use strict";o("9032")},e643:function(e,t,o){"use strict";o("255e")}});
//# sourceMappingURL=app.db3aecd3.js.map